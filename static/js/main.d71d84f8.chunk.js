(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{1679:function(e,t,a){var n={"./ReadMe.md":1680,"./af_ZA":126,"./af_ZA.js":126,"./ar":127,"./ar.js":127,"./az":128,"./az.js":128,"./cz":129,"./cz.js":129,"./de":130,"./de.js":130,"./de_AT":131,"./de_AT.js":131,"./de_CH":132,"./de_CH.js":132,"./el":133,"./el.js":133,"./en":134,"./en.js":134,"./en_AU":135,"./en_AU.js":135,"./en_AU_ocker":136,"./en_AU_ocker.js":136,"./en_BORK":137,"./en_BORK.js":137,"./en_CA":138,"./en_CA.js":138,"./en_GB":139,"./en_GB.js":139,"./en_GH":140,"./en_GH.js":140,"./en_IE":141,"./en_IE.js":141,"./en_IND":142,"./en_IND.js":142,"./en_NG":143,"./en_NG.js":143,"./en_US":144,"./en_US.js":144,"./en_ZA":145,"./en_ZA.js":145,"./es":146,"./es.js":146,"./es_MX":147,"./es_MX.js":147,"./fa":148,"./fa.js":148,"./fi":149,"./fi.js":149,"./fr":150,"./fr.js":150,"./fr_CA":151,"./fr_CA.js":151,"./fr_CH":152,"./fr_CH.js":152,"./ge":153,"./ge.js":153,"./hr":154,"./hr.js":154,"./hy":155,"./hy.js":155,"./id_ID":156,"./id_ID.js":156,"./it":157,"./it.js":157,"./ja":158,"./ja.js":158,"./ko":159,"./ko.js":159,"./nb_NO":160,"./nb_NO.js":160,"./ne":161,"./ne.js":161,"./nl":162,"./nl.js":162,"./nl_BE":163,"./nl_BE.js":163,"./pl":164,"./pl.js":164,"./pt_BR":165,"./pt_BR.js":165,"./pt_PT":166,"./pt_PT.js":166,"./ro":167,"./ro.js":167,"./ru":168,"./ru.js":168,"./sk":169,"./sk.js":169,"./sv":170,"./sv.js":170,"./tr":171,"./tr.js":171,"./uk":172,"./uk.js":172,"./vi":173,"./vi.js":173,"./zh_CN":174,"./zh_CN.js":174,"./zh_TW":175,"./zh_TW.js":175,"./zu_ZA":176,"./zu_ZA.js":176};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=1679},1830:function(e,t,a){},1831:function(e,t,a){},1832:function(e,t,a){},1833:function(e,t,a){},1834:function(e,t,a){},1835:function(e,t,a){},1836:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),i=a.n(s),o=(a(215),a(13)),l=a(14),c=a(17),u=a(16),d={API_URL:"/api/",GET_WHOLE_TWEET_URL:"/api/wholePost/",GET_POST_FROM_ID:"/api/getPostFromID/",GET_VIEWERS_URL:"/api/viewers/",GET_IDs_FROM_VIEWER_URL:"/api/ViewerToId/",GET_ARTICLE_FROM_ID_URL:"/api/article/"};a(216),a(217);var m=function(e){var t=e.active,a=e.text,n=e.Icon,s=e.onClick;return r.a.createElement("div",{className:"sidebarOption ".concat(t&&"sidebarOption--active"),onClick:s},r.a.createElement(n,null),r.a.createElement("h2",{className:"text"},a))},p=a(1878),h=a(1880),f=a(1881),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.viewerObj,a=t.list,n=(t.num,t.setNum);return r.a.createElement(p.a,{id:"viewers-menu",anchorEl:this.props.anchorEl,open:Boolean(this.props.anchorEl),disableEnforceFocus:!0,onClose:function(){return e.props.setAnchorEl(!1)}},a.map((function(t,a){return r.a.createElement(h.a,{key:a,onClick:function(){n(a),e.props.setAnchorEl(!1)}},r.a.createElement("div",{class:"viewerOptionAvatarDiv",style:{padding:"5px"}},r.a.createElement(f.a,{src:"/api/img/Website/"+String(Math.round(1e3*Math.random()))})),r.a.createElement("div",{class:"viewerOptionText"},t))})))}}]),a}(r.a.Component),E=a(195),_=a.n(E),g=a(60),w=a.n(g),j=a(49),b=a.n(j),k=a(50),y=a.n(k),N=a(1875),O=a(192),C=a.n(O),x=a(62);function S(e){for(var t=e.split(""),a=[],n=t.length,r=0;r<n;r++){var s=Math.floor(Math.random()*t.length);a.push(t[s]),t.splice(s,1)}return a.join("")}function L(){var e=Object(x.a)().schema("item",{date:{faker:"date.past"}},1).buildSync().item[0].date;return console.log("Generated fake date: "+String(e)),e}function T(){return Object(x.a)().schema("user",{firstName:{faker:"name.firstName"},lastName:{faker:"name.lastName"},username:{function:function(){return this.object.firstName+this.object.lastName}},displayName:{function:function(){return this.object.firstName+" "+this.object.lastName}}},1).buildSync().user[0]}var I=a(194),R=a.n(I),A=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleClick=function(e){e.preventDefault(),n.setState({anchorEl:!Boolean(n.state.anchorEl)&&e.currentTarget})},n.state={anchorEl:!1},n}return Object(l.a)(a,[{key:"bark",value:function(){document.getElementsByClassName("bark-sound")[0].play()}},{key:"render",value:function(){var e=this,t=this.props.viewers;return r.a.createElement("div",{className:"sidebar"},r.a.createElement("img",{className:"sidebar__twitterIcon",src:C.a,alt:"Barker Icon"}),r.a.createElement(m,{active:!0,Icon:_.a,text:S("Home")}),r.a.createElement(m,{Icon:w.a,text:"Explore"}),r.a.createElement(m,{Icon:b.a,text:"Profile",onClick:this.handleClick}),r.a.createElement(m,{Icon:y.a,text:"More",onClick:function(){return window.open("https://github.com/LeoLinRui/SSTP/wiki","_blank")}}),r.a.createElement(N.a,{variant:"outlined",className:"sidebar__tweet",onClick:this.bark},"Bark"),r.a.createElement("audio",{className:"bark-sound"},r.a.createElement("source",{src:R.a})),r.a.createElement(v,{anchorEl:this.state.anchorEl,setAnchorEl:function(t){return e.setState({anchorEl:t})},viewerObj:t}))}}]),a}(r.a.Component),D=a(20),M=a.n(D),W=a(46),z=a(61),U=a.n(z),G=a(196),P=a.n(G),B=a(197),H=a.n(B),F=(a(1830),a(1876)),Z=a(1877),V=a(198),q=a.n(V),X=a(199),J=a.n(X),K=a(200),$=a.n(K),Q=a(202),Y=a.n(Q),ee=a(201),te=a.n(ee),ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isFlipped:!1,isPaused:!1,blurb:"",liked:!1},n.handleClick=n.handleClick.bind(Object(W.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(e){e.preventDefault(),this.setState((function(e){return{isFlipped:!e.isFlipped}}))}},{key:"render",value:function(){var e,t,a,n=this,s=String(this.props.media);if(a=""===this.props.explanation||void 0===this.props.explanation?"This Bark current does not have an explanation":this.props.explanation.replace(/(<a href=")?((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)))(">(.*)<\/a>)?/gi,(function(){return'<a href="'+arguments[2]+'" target="_blank">'+(arguments[7]||arguments[2])+"</a>"})),t=this.props.text.replace(/(<a href=")?((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)))(">(.*)<\/a>)?/gi,(function(){return'<a href="'+arguments[2]+'"target="_blank">'+(arguments[7]||arguments[2])+"</a>"})),s.startsWith("news:")){var i=[window.location.origin,"news",s.substring(5)].join("/");e=r.a.createElement("a",{className:"news__a",href:i,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(F.a,{className:"news__card",style:{paddingRight:"20px"}},r.a.createElement(Z.a,{image:this.props.img}),r.a.createElement("div",{className:"cardTextDiv"},this.props.text.split(" ").slice(0,20).join(" ")+"..."))),t=(t=this.props.text).substring(0,t.length-3)}else if(U.a.canPlay(s))e=r.a.createElement(H.a,{onChange:this.visibilityChange},(function(e){var t,a,i=e.isVisible;return window.innerWidth<420?(a="auto",t="70vw"):window.innerWidth<1024?(a="20vw",t="35vw"):(a="40vh",t="90%"),r.a.createElement("div",{className:"player-wrapper"},r.a.createElement(U.a,{height:a,width:t,url:s,loop:!0,muted:!0,playing:i&&!n.state.isPaused,onClick:function(){return n.setState({isPaused:!0})},config:{youtube:{playerVars:{controls:1,disablekb:1,modestbranding:1,rel:0,color:"white"}}}},r.a.createElement("div",null)))})),console.log("play!");else if(""===s||null==s){var o=this.props.img;e=o?r.a.createElement("img",{src:o}):r.a.createElement("div",null)}else e=r.a.createElement("img",{src:s,alt:""});var l=r.a.createElement(P.a,{isFlipped:this.state.isFlipped,flipDirection:"vertical"},r.a.createElement("p",{className:"text",dangerouslySetInnerHTML:{__html:t}}),r.a.createElement("p",{className:"text",dangerouslySetInnerHTML:{__html:a}}));return r.a.createElement("div",{className:"post"},r.a.createElement("div",{className:"post__avatar"},r.a.createElement(f.a,{src:this.props.avatar})),r.a.createElement("div",{className:"post__body"},r.a.createElement("div",{className:"post__header"},r.a.createElement("div",{className:"post__headerText"},r.a.createElement("h3",{onClick:this.handleClick},this.props.displayName," ",r.a.createElement("span",{className:"post__headerSpecial"},this.props.verified&&r.a.createElement(q.a,{className:"post__badge"})," @",this.props.username))),r.a.createElement("div",{className:"post__headerDescription"},l)),e,r.a.createElement("div",{className:"post__footer"},r.a.createElement(J.a,{fontSize:"small"}),r.a.createElement($.a,{fontSize:"small"}),r.a.createElement("a",{style:{display:"block",cursor:"pointer"},onClick:function(){return n.setState({liked:!n.state.liked})}},this.state.liked?r.a.createElement(te.a,{fontSize:"small",style:{color:"rgb(224, 36, 94)"}}):r.a.createElement(Y.a,{fontSize:"small"})))))}}]),a}(r.a.Component),ne=(a(1831),a(51)),re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).addPost=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=function(e){n.setState({loading:!0});var t=n.state.idList.splice(Math.floor(Math.random()*n.state.idList.length),1),a=d.GET_WHOLE_TWEET_URL+t+"/";M.a.get(a).then((function(e){n.setState({loading:!0});var a=e.data;if(a.username.startsWith("random:")){var r=T();a.username=r.username,a.displayName=r.displayName}a.media.startsWith("api:")&&(M.a.get(a.media.substring(4)).then((function(e){return a.media=e.data})).catch((function(e){return console.log(e+"\u2014retrieving from "+a.media.substring(4))})),a.media="https://media4.giphy.com/media/3oEjI6SIIHBdRxXI40/200.gif"),a.text.startsWith("[repeat]")&&(a.text=a.text.substring(8),n.state.idList.push(t)),null!==a.avatar&&""!==a.avatar||(a.avatar="/api/img/ProfilePic/"+String(Math.round(1e3*Math.random()))),n.setState({posts:n.state.posts.concat(a),loading:!1})})).catch((function(e){return"Error retrieving post: "+e})),n.setState({loading:!1})},a=0;a<e&&n.state.idList.length>0;a++)t(a)},n.handleScroll=function(e){e.preventDefault();var t=Math.round(e.target.scrollHeight-e.target.scrollTop);n.state.idList.length>0?t<=Math.ceil(e.target.clientHeight)+500&&(!0===n.state.loading?!1===n.state.queue&&(n.state.queue=!0):n.addPost(2)):console.log("Out of posts!")},n.moreClick=function(){console.log("Clicked moreClick"),window.open("https://github.com/LeoLinRui/SSTP/wiki","_blank")},n.profileClick=function(e){console.log("Clicked profileClick"),e.preventDefault(),n.setState({anchorEl:!Boolean(n.state.anchorEl)&&e.currentTarget})},n.state={loading:!1,queue:!1,posts:[],idList:[],viewedList:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.addPost(3)}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.queue&&(this.addPost(),this.state.queue=!1),e.viewers.list[e.viewers.num]!==this.props.viewers.list[this.props.viewers.num]&&this.updateIdList()}},{key:"updateIdList",value:function(){var e=this;this.setState({posts:[],loading:!0});var t=this.props.viewers.list[this.props.viewers.num],a=d.GET_IDs_FROM_VIEWER_URL+t+"/";console.log("Getting IDs from: "+a),M.a.get(a).then((function(t){var a=t.data.tweetIds;console.log(a),e.setState({idList:a}),e.setState({loading:!1}),e.addPost(6)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=null;return t=window.innerWidth>420?r.a.createElement("h2",null,"Home"):r.a.createElement("h2",null,r.a.createElement("div",{className:"topIconDiv"},r.a.createElement(b.a,{classname:"topIcon",onClick:this.profileClick}),r.a.createElement(y.a,{classname:"topIcon",onClick:this.moreClick})),r.a.createElement(v,{anchorEl:this.state.anchorEl,setAnchorEl:function(t){return e.setState({anchorEl:t})},viewerObj:this.props.viewers})),r.a.createElement("div",{className:"feed",onScroll:this.handleScroll},r.a.createElement("div",{className:"feed__header"},t),r.a.createElement(ne.a,null,this.state.posts.map((function(e,t){return r.a.createElement(ae,{key:t,username:e.username,displayName:e.displayName,verified:e.verified,text:e.text,explanation:e.explanation,avatar:e.avatar,media:e.media,img:e.img})}))))}}]),a}(r.a.Component),se=(a(1832),a(1833),a(1879)),ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={text:"",media_url:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=d.GET_WHOLE_TWEET_URL+this.props.id+"/";M.a.get(t).then((function(t){var a=t.data;e.setState({text:a.text.split(" ").splice(0,20).join(" "),media_url:a.media})}))}},{key:"render",value:function(){var e=[window.location.origin,"news",this.state.media_url.substring(5)].join("/");return r.a.createElement("a",{className:"newsCard__a",href:e,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(se.a,{body:!0,outline:!0,color:"primary",style:{padding:"20px",border:"0",borderTop:"1px solid rgb(235, 238, 240)",borderBottom:"1px solid rgb(235, 238, 240)"}},r.a.createElement("div",{className:"newsCardDiv"},this.state.text)))}}]),a}(r.a.Component),oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateList=function(){var e=n.props.viewers,t=e.list[e.num===e.list.length-1?0:e.num+1],a=d.GET_IDs_FROM_VIEWER_URL+t+"/";console.log("Getting news IDs from: "+a);var s=[];M.a.get(a).then((function(e){var t=e.data.newsTweetIds;console.log(t),t.splice(0,5).forEach((function(e){s.push(r.a.createElement(ie,{id:e,key:"newsCard__"+e}))})),n.setState({idList:t.splice(0,5),newsOptions:s}),n.forceUpdate()})).catch((function(e){console.log(e)}))},n.state={idList:[]},n}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.viewers.num!==this.props.viewers.num?(this.updateList(),!0):t.idList!==this.state.idList&&(console.log("idList-powered update"),!0)}},{key:"render",value:function(){return r.a.createElement("div",{className:"widgets"},r.a.createElement("div",{className:"topTextContainer"},r.a.createElement("div",{className:"topTextContainer__div"},r.a.createElement("h2",{className:"topText"},"Latest News"),r.a.createElement("div",{className:"NewsCards",style:{paddingTop:"10px"}},r.a.createElement(ne.a,null,this.state.newsOptions)))))}}]),a}(r.a.Component),le=(a(1834),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={text:"",title:"",image_url:""},n}return Object(l.a)(a,[{key:"getArticle",value:function(){var e=this;console.log("Getting article "+this.props.id),M.a.get(d.GET_ARTICLE_FROM_ID_URL+this.props.id+"/").then((function(t){var a,n=t.data,r=n.text.replace(/(<a href=")?((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)))(">(.*)<\/a>)?/gi,(function(){return'<a href="'+arguments[2]+'"target="_blank style="cursor: pointer"">'+(arguments[7]||arguments[2])+"</a>"}));if(null===n.title||""===n.title){var s=[];String(n.text).split(" ").slice(0,6).forEach((function(e){s.push(S(e))})),a=s.join(" ").replace(".","")}else a=n.title;e.setState({title:a,text:r}),e.forceUpdate()})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getArticle()}},{key:"render",value:function(){return console.log("Article with id: "+this.props.id),r.a.createElement("html",{class:"wf-montserrat-n4-active wf-sourcesanspro-n2-active wf-active"},r.a.createElement("head",null,r.a.createElement("meta",{charset:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.a.createElement("script",{src:"http://use.edgefonts.net/montserrat:n4:default;source-sans-pro:n2:default.js",type:"text/javascript"})),r.a.createElement("body",{class:"mybody"},r.a.createElement("header",null,r.a.createElement("div",{class:"profileLogo",style:{height:"5vh"}},r.a.createElement("p",{class:"logoPlaceholder"},r.a.createElement("img",{src:"logoImage.png",alt:"logo"})))),r.a.createElement("section",{class:"mainContent"},r.a.createElement("section",{class:"section2"},r.a.createElement("article",{class:"section2Content"},r.a.createElement("h2",{class:"sectionContentTitle"},this.state.title),r.a.createElement("h3",{class:"sectionContentSubTitle"},L().toLocaleString()),r.a.createElement("hr",{class:"myhr"}),r.a.createElement("p",{class:"sectionContent",dangerouslySetInnerHTML:{__html:this.state.text}}))))))}}]),a}(r.a.Component)),ce=(a(1835),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setViewer=function(e){window.scrollTo(0,0),n.setState({viewerNum:e})},n.state={viewerNum:0,viewersList:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;"/"===window.location.pathname&&M.a.get(d.GET_VIEWERS_URL).then((function(t){e.setState({viewersList:t.data}),console.log("Recieved users: "+e.state.viewersList)})).catch((function(e){return console.log("Error retrieving viewers list: "+e)}))}},{key:"render",value:function(){var e=window.location.pathname,t=null;if("/"===e){var a={list:this.state.viewersList,num:this.state.viewerNum,setNum:this.setViewer};t=r.a.createElement("div",{className:"app"},r.a.createElement(A,{viewers:a}),r.a.createElement(re,{viewers:a}),r.a.createElement(oe,{viewers:a}))}if(e.startsWith("/news/")){var n=e.substr(6);n.endsWith("/")&&(n=n.substr(0,n.length-1)),t=r.a.createElement(le,{id:n})}return null==t&&(t=r.a.createElement("div",{style:{fontSize:"xx-large"}},"Error 404: Not Found")),r.a.createElement("html",{lang:"en"},t)}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},192:function(e,t,a){e.exports=a.p+"static/media/BarkerLogo.fae0bab6.png"},194:function(e,t,a){e.exports=a.p+"static/media/dog.d3963826.mp3"},210:function(e,t,a){e.exports=a(1836)},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){}},[[210,14,15]]]);
//# sourceMappingURL=main.d71d84f8.chunk.js.map